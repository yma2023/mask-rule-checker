> ## å„ªå…ˆé †ä½ï¼ˆã“ã‚Œã ã‘ã‚„ã‚Œã°èª­ã‚ã‚‹é †ï¼‰
> 
> 1. **`std::string`** 
> 2. å‚ç…§ / const    
> 3. ä¾‹å¤–å‡¦ç† ğŸ‘ˆä»Šå›ã¯ã“ã“ï¼ï¼
> 4. `ifstream` / `ofstream` + `getline`
> 5. `vector` + `size_t` + `auto&`
> 6. ã‚¯ãƒ©ã‚¹ / namespaceï¼ˆEasyMRCå‘¨ã‚Šï¼‰
> 7. `argc` / `argv`
> 8. `chrono`
> 9. `thread`ï¼ˆãŠã¾ã‘ï¼‰<br>
><br>
>
<br>
<br>

äº†è§£ã€‚
ã§ã¯ **Hello World ã‹ã‚‰ãã®ã¾ã¾è¶³ã—ã¦ã„ã‘ã‚‹å½¢**ã§ã€
**ä¾‹å¤–å‡¦ç†ï¼ˆtry / catchï¼‰ã‚’ç¬¬2å¼¾ã¨ã—ã¦ä¸å¯§ã«**ã‚„ã‚Šã¾ã™ã€‚

ç›®çš„ã¯ãŸã ä¸€ã¤ï¼š

> **ã€Œå¤±æ•—ã—ãŸã‚‰ã€é€”ä¸­ã§å®‰å…¨ã«ã‚„ã‚ã‚‹ã€ä»•çµ„ã¿ãŒåˆ†ã‹ã‚‹ã“ã¨**

  

# ç¬¬2å¼¾-â‘¢ï¼šä¾‹å¤–å‡¦ç†ï¼ˆtry / catchï¼‰

  

## ç¬¬0ç« ï¼šã¾ãš C çš„ãªã€Œå¤±æ•—å‡¦ç†ã€ã‚’æ€ã„å‡ºã™

### Cã§ã‚ˆãã‚ã‚‹å½¢

```c
#include <stdio.h>

int open_file(){
    return -1; // å¤±æ•—
}

int main(void){
    if(open_file() == -1){
        printf("error\n");
        return 1;
    }
    return 0;
}
```

### å•é¡Œç‚¹

* å‘¼ã³å‡ºã—å´ãŒ **æ¯å›ãƒã‚§ãƒƒã‚¯ã—ãªã„ã¨ã„ã‘ãªã„**
* ãƒã‚§ãƒƒã‚¯å¿˜ã‚Œï¼ãƒã‚°
* ã‚¨ãƒ©ãƒ¼åŸå› ã®æƒ…å ±ãŒå¼±ã„

  

## ç¬¬1ç« ï¼šC++ã®è€ƒãˆæ–¹ï¼ˆã–ã£ãã‚Šï¼‰

C++ã§ã¯ã“ã†è€ƒãˆã‚‹ï¼š

> **ã€Œæ­£å¸¸ç³»ã€ã¨ã€Œç•°å¸¸ç³»ã€ã‚’åˆ†é›¢ã—ãŸã„**

* æ­£å¸¸ãªå‡¦ç† â†’ ä¸Šã‹ã‚‰æ™®é€šã«æ›¸ã
* ç•°å¸¸ãŒèµ·ããŸã‚‰ â†’ ãã®å ´ã§ **æŠ•ã’ã‚‹**
* ä¸Šã®éšå±¤ã§ â†’ **ã¾ã¨ã‚ã¦æ•ã¾ãˆã‚‹**

ã“ã‚ŒãŒ **ä¾‹å¤–å‡¦ç†**ã€‚

  

## ç¬¬2ç« ï¼šæœ€å°ã® try / catchï¼ˆHelloWorldç‰ˆï¼‰

### ã¾ãšã¯å½¢ã ã‘

```cpp
#include <iostream>

int main(){
    try {
        std::cout << "Start\n";
        throw 1;
        std::cout << "End\n";
    } catch(int e) {
        std::cout << "Caught error\n";
    }
}
```

### å®Ÿè¡Œçµæœ

```
Start
Caught error
```

### é‡è¦ãƒã‚¤ãƒ³ãƒˆ

* `throw` ãŒå®Ÿè¡Œã•ã‚ŒãŸç¬é–“

  * ãã‚Œä»¥é™ã®å‡¦ç†ã¯ **å…¨éƒ¨ã‚¹ã‚­ãƒƒãƒ—**
* `catch` ã« **ã‚¸ãƒ£ãƒ³ãƒ—**ã™ã‚‹

ğŸ‘‰ **gotoã§ã¯ãªã„ãŒã€éå¸¸å£ã‚¸ãƒ£ãƒ³ãƒ—**ã ã¨æ€ã£ã¦OKã€‚

  

## ç¬¬3ç« ï¼šthrow ã¯ã€Œreturn ã®ä¸Šä½äº’æ›ã€

### return ã®é™ç•Œ

```cpp
int f(){
    if(error) return -1;
    return 0;
}
```

å‘¼ã³å‡ºã—å´ï¼š

```cpp
if(f() == -1){
    // ã‚¨ãƒ©ãƒ¼å‡¦ç†
}
```

ğŸ‘‰ **å‘¼ã³å‡ºã—ãŒæ·±ããªã‚‹ã¨åœ°ç„**

  

### throw ã®å ´åˆ

```cpp
void f(){
    if(error){
        throw 1;
    }
}
```

å‘¼ã³å‡ºã—å´ï¼š

```cpp
try{
    f();
}catch(int){
    // ã“ã“ã§ä¸€æ‹¬å‡¦ç†
}
```

ğŸ‘‰ **é€”ä¸­ã®é–¢æ•°ã¯ä½•ã‚‚çŸ¥ã‚‰ãªãã¦ã„ã„**

  

## ç¬¬4ç« ï¼šå®Ÿå‹™ã§ä½¿ã†ä¾‹å¤–ï¼ˆstd::exceptionï¼‰

### 4-1. æ•°å­—ã§ã¯ãªãã€Œç†ç”±ã€ã‚’æŠ•ã’ã‚‹

```cpp
#include <stdexcept>

throw std::runtime_error("file open failed");
```

### 4-2. catch å´

```cpp
catch(const std::exception& e){
    std::cout << e.what() << "\n";
}
```

### ãƒã‚¤ãƒ³ãƒˆ

* `what()` ã¯ **ã‚¨ãƒ©ãƒ¼å†…å®¹ã®æ–‡å­—åˆ—**
* `std::exception` ã¯ **ä¾‹å¤–ã®å…±é€šã®è¦ª**

  

## ç¬¬5ç« ï¼šHelloWorldï¼‹ä¾‹å¤–ï¼ˆè©¦ã›ã‚‹ç‰ˆï¼‰

### 5-1. é–¢æ•°ã§å¤±æ•—ã‚’èµ·ã“ã™

```cpp
#include <iostream>
#include <stdexcept>

void load(){
    throw std::runtime_error("load failed");
}

int main(){
    try{
        load();
        std::cout << "OK\n";
    }catch(const std::exception& e){
        std::cout << "Error: " << e.what() << "\n";
    }
}
```

### å®Ÿè¡Œçµæœ

```
Error: load failed
```

ğŸ‘‰ `load()` ã®ä¸­ã§å¤±æ•—ã—ã¦ã‚‚
ğŸ‘‰ `main` ã§ **å®‰å…¨ã«æ•ã¾ãˆã‚‰ã‚Œã‚‹**

  

## ç¬¬6ç« ï¼šã‚ãªãŸã®ã‚³ãƒ¼ãƒ‰ã«å®Œå…¨å¯¾å¿œã•ã›ã‚‹

### 6-1. ruleãƒ•ã‚¡ã‚¤ãƒ«ãŒé–‹ã‘ãªã‹ã£ãŸå ´åˆ

```cpp
if(!file.is_open()){
    throw std::runtime_error("Cannot open rule file");
}
```

æ„å‘³ï¼š

* ã“ã®é–¢æ•°ã§ã¯ **ç¶šè¡Œä¸èƒ½**
* å‘¼ã³å‡ºã—å…ƒã«ã€Œå¤±æ•—ã—ãŸã€ã“ã¨ã‚’ä¼ãˆã‚‹

  

### 6-2. mainå´ã§ã¾ã¨ã‚ã¦å‡¦ç†

```cpp
try{
    config = load_rule_file(rule_file);
}catch(const std::exception& e){
    std::cerr << e.what() << std::endl;
    return 1;
}
```

ğŸ‘‰ `load_rule_file()` ã®ä¸­èº«ã‚’
ğŸ‘‰ **1è¡Œãšã¤ if ã§ãƒã‚§ãƒƒã‚¯ã™ã‚‹å¿…è¦ãŒãªããªã‚‹**

  

## ç¬¬7ç« ï¼štry/catch ã¯ã©ã“ã«æ›¸ãï¼Ÿ

å®Ÿå‹™ãƒ«ãƒ¼ãƒ«ï¼ˆè¶…é‡è¦ï¼‰ï¼š

* **throw**ï¼šå¤±æ•—ã—ãŸã€Œç¾å ´ã€
* **catch**ï¼šãƒ—ãƒ­ã‚°ãƒ©ãƒ ã®ã€Œå…¥å£ï¼ˆmainï¼‰ã€

ğŸ‘‰ ã ã‹ã‚‰ã‚ãªãŸã®ã‚³ãƒ¼ãƒ‰ã‚‚

* load_rule_file â†’ throw
* main â†’ catch

ã«ãªã£ã¦ã„ã‚‹ã€‚

  

## ç¬¬8ç« ï¼šã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆã—ãªãŒã‚‰è©¦ã™èª²é¡Œ

### èª²é¡Œâ‘ ï¼šthrow ã‚’æ¶ˆã—ã¦ã¿ã‚‹

```cpp
// throw std::runtime_error("load failed");
```

â†’ `OK` ãŒå‡ºã‚‹ã‹ï¼Ÿ

  

### èª²é¡Œâ‘¡ï¼šcatch ã‚’æ¶ˆã—ã¦ã¿ã‚‹

```cpp
// catch(const std::exception& e){ ... }
```

â†’ ãƒ—ãƒ­ã‚°ãƒ©ãƒ ãŒ **å¼·åˆ¶çµ‚äº†**ã™ã‚‹ã®ã‚’ç¢ºèª

  

## ã“ã“ã¾ã§ã®åˆ°é”ç‚¹

ã‚ãªãŸã¯ã„ã¾ï¼š

* return ã«ã‚ˆã‚‹å¤±æ•—å‡¦ç† âŒ
* throw/catch ã«ã‚ˆã‚‹ç•°å¸¸ç³»åˆ†é›¢ âœ…

ã¨ã„ã† **å®Ÿå‹™C++ã®æ›¸ãæ–¹**ã«å…¥ã£ãŸã€‚

  

## æ¬¡ã«é€²ã‚€ãªã‚‰ï¼ˆãŠã™ã™ã‚é †ï¼‰

åŒã˜ç†è§£ã®æ·±ã•ã§ç¶šã‘ã‚‹ãªã‚‰ï¼š

1ï¸âƒ£ **ifstream + getline**ï¼ˆä¾‹å¤–ã¨ç›¸æ€§æŠœç¾¤ï¼‰
2ï¸âƒ£ **vector + auto&**ï¼ˆçµæœãƒªã‚¹ãƒˆå‡¦ç†ï¼‰
3ï¸âƒ£ **argc / argv**ï¼ˆCLIãƒ„ãƒ¼ãƒ«åŒ–ï¼‰
4ï¸âƒ£ **class / namespace**ï¼ˆEasyMRCã®æ ¸å¿ƒï¼‰

æ¬¡ã©ã‚Œè¡Œãï¼Ÿ
åŒã˜ã€ŒHelloWorldã‹ã‚‰ç©ã¿ä¸Šã’æ–¹å¼ã€ã§ç¶šã‘ã‚‹ã€‚
